import{r as f,m as E,j as e,a as _}from"./app-DblnoUo9.js";import{B as b,t as m}from"./index-CtjZe5nG.js";import{f as N}from"./dialog-SbzVe55u.js";import{I as x}from"./input-BgtC-TtO.js";import{L as h}from"./label-1EsIaW-j.js";import"./index-DOebTmJq.js";import"./index-B3JiuUVX.js";function k({permission:a,onSuccess:i}){const[y,l]=f.useState(!1),{data:n,setData:o,errors:t,setError:j,clearErrors:g}=E({name:a.name,display_name:a.display_name});f.useEffect(()=>{o({name:a.name,display_name:a.display_name})},[a]);const v=async s=>{var d,p;s.preventDefault(),g(),l(!0);try{const r=await _.put(`/permissions/${a.id}`,n,{headers:{"X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});m.success("Permission updated successfully!"),i==null||i()}catch(r){if(console.error("Error updating permission:",r),((p=r.response)==null?void 0:p.status)===422){const c=r.response.data.errors;Object.keys(c).forEach(u=>{j(u,c[u][0])}),m.error("Please check the form for errors.")}else m.error("Failed to update permission. Please try again later.")}finally{l(!1)}};return e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"name",children:"Name"}),e.jsx(x,{id:"name",value:n.name,onChange:s=>o("name",s.target.value),required:!0}),t.name&&e.jsx("p",{className:"text-destructive text-sm",children:t.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"display_name",children:"Display Name"}),e.jsx(x,{id:"display_name",value:n.display_name,onChange:s=>o("display_name",s.target.value),required:!0}),t.display_name&&e.jsx("p",{className:"text-destructive text-sm",children:t.display_name})]})]}),e.jsx(N,{children:e.jsx(b,{type:"submit",disabled:y,children:"Update Permission"})})]})}export{k as default};
