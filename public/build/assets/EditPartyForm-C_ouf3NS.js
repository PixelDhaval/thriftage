import{r as j,m as f,j as e,a as E}from"./app-Bt-737Yp.js";import{B as C,t as m}from"./index-DJ69vFpb.js";import{f as F}from"./dialog-MUZG_vuV.js";import{I as d}from"./input-CVFdnnrk.js";import{L as i}from"./label-CKUxB6ed.js";import{S,a as b,b as z,c as P,d as c}from"./select-C1NddIBO.js";import"./index-CjRLNKjQ.js";import"./floating-ui.react-dom-CbU4Zjha.js";import"./floating-ui.dom-C5vApqfE.js";import"./check-BVJViSTE.js";function R({party:s,onSuccess:o}){const[v,h]=j.useState(!1),{data:r,setData:l,errors:a,setError:_,clearErrors:N}=f({name:s.name,type:s.type||"",address_line_1:s.address_line_1||"",address_line_2:s.address_line_2||"",city:s.city||"",state:s.state||"",zip:s.zip||"",country:s.country||"",phone:s.phone||"",email:s.email||"",gst:s.gst||""});j.useEffect(()=>{l({name:s.name,type:s.type||"",address_line_1:s.address_line_1||"",address_line_2:s.address_line_2||"",city:s.city||"",state:s.state||"",zip:s.zip||"",country:s.country||"",phone:s.phone||"",email:s.email||"",gst:s.gst||""})},[s]);const y=async t=>{var p,x;t.preventDefault(),N(),h(!0);try{const n=await E.put(`/parties/${s.id}`,r,{headers:{"X-CSRF-TOKEN":((p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});m.success("Party updated successfully!"),o==null||o()}catch(n){if(console.error("Error updating party:",n),((x=n.response)==null?void 0:x.status)===422){const u=n.response.data.errors;Object.keys(u).forEach(g=>{_(g,u[g][0])}),m.error("Please check the form for errors.")}else m.error("Failed to update party. Please try again later.")}finally{h(!1)}};return e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"name",children:"Name"}),e.jsx(d,{id:"name",value:r.name,onChange:t=>l("name",t.target.value),required:!0,placeholder:"Enter party name"}),a.name&&e.jsx("p",{className:"text-destructive text-sm",children:a.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"type",children:"Type"}),e.jsxs(S,{value:r.type,onValueChange:t=>l("type",t),children:[e.jsx(b,{children:e.jsx(z,{placeholder:"Select type"})}),e.jsxs(P,{children:[e.jsx(c,{value:"importer",children:"Importer"}),e.jsx(c,{value:"supplier",children:"Supplier"}),e.jsx(c,{value:"exporter",children:"Exporter"}),e.jsx(c,{value:"local",children:"Local"})]})]}),a.type&&e.jsx("p",{className:"text-destructive text-sm",children:a.type})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"address_line_1",children:"Address Line 1"}),e.jsx(d,{id:"address_line_1",value:r.address_line_1,onChange:t=>l("address_line_1",t.target.value),placeholder:"Enter address line 1"}),a.address_line_1&&e.jsx("p",{className:"text-destructive text-sm",children:a.address_line_1})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"address_line_2",children:"Address Line 2"}),e.jsx(d,{id:"address_line_2",value:r.address_line_2,onChange:t=>l("address_line_2",t.target.value),placeholder:"Enter address line 2"}),a.address_line_2&&e.jsx("p",{className:"text-destructive text-sm",children:a.address_line_2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"city",children:"City"}),e.jsx(d,{id:"city",value:r.city,onChange:t=>l("city",t.target.value),placeholder:"Enter city"}),a.city&&e.jsx("p",{className:"text-destructive text-sm",children:a.city})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"state",children:"State"}),e.jsx(d,{id:"state",value:r.state,onChange:t=>l("state",t.target.value),placeholder:"Enter state"}),a.state&&e.jsx("p",{className:"text-destructive text-sm",children:a.state})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"zip",children:"ZIP Code"}),e.jsx(d,{id:"zip",value:r.zip,onChange:t=>l("zip",t.target.value),placeholder:"Enter ZIP code"}),a.zip&&e.jsx("p",{className:"text-destructive text-sm",children:a.zip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"country",children:"Country"}),e.jsx(d,{id:"country",value:r.country,onChange:t=>l("country",t.target.value),placeholder:"Enter country"}),a.country&&e.jsx("p",{className:"text-destructive text-sm",children:a.country})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"phone",children:"Phone"}),e.jsx(d,{id:"phone",value:r.phone,onChange:t=>l("phone",t.target.value),placeholder:"Enter phone number"}),a.phone&&e.jsx("p",{className:"text-destructive text-sm",children:a.phone})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",type:"email",value:r.email,onChange:t=>l("email",t.target.value),placeholder:"Enter email address"}),a.email&&e.jsx("p",{className:"text-destructive text-sm",children:a.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"gst",children:"GST Number"}),e.jsx(d,{id:"gst",value:r.gst,onChange:t=>l("gst",t.target.value),placeholder:"Enter GST number"}),a.gst&&e.jsx("p",{className:"text-destructive text-sm",children:a.gst})]})]}),e.jsx(F,{children:e.jsx(C,{type:"submit",disabled:v,children:"Update Party"})})]})}export{R as default};
