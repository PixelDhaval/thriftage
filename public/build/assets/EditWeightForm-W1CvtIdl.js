import{r as m,m as v,j as e,a as b}from"./app-C6wr7xOM.js";import{B as S,t as n}from"./index-ByhlrBJ7.js";import{f as E}from"./dialog-Dune_8vQ.js";import{I as _}from"./input-3tYqWR7g.js";import{L as u}from"./label-C16cjRI5.js";import{S as N,a as k,b as F,c as C,d as x}from"./select-Kz6bl7S3.js";import"./index-CdYzvuDs.js";import"./index-CrXPg-Qx.js";import"./check-Dpvvyly-.js";function K({weight:t,onSuccess:i}){const[f,c]=m.useState(!1),{data:o,setData:l,errors:s,setError:j,clearErrors:y}=v({weight:t.weight,weight_type:t.weight_type||"kg"});m.useEffect(()=>{l({weight:t.weight,weight_type:t.weight_type||"kg"})},[t]);const w=async r=>{var p,h;r.preventDefault(),y(),c(!0);try{const a=await b.put(`/weights/${t.id}`,o,{headers:{"X-CSRF-TOKEN":((p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});n.success("Weight updated successfully!"),i==null||i()}catch(a){if(console.error("Error updating weight:",a),((h=a.response)==null?void 0:h.status)===422){const g=a.response.data.errors;Object.keys(g).forEach(d=>{j(d,g[d][0])}),n.error("Please check the form for errors.")}else n.error("Failed to update weight. Please try again later.")}finally{c(!1)}};return e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"weight",children:"Weight Value"}),e.jsx(_,{id:"weight",value:o.weight,onChange:r=>l("weight",r.target.value),required:!0,type:"number",step:"0.01"}),s.weight&&e.jsx("p",{className:"text-destructive text-sm",children:s.weight})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"weight_type",children:"Weight Type"}),e.jsxs(N,{value:o.weight_type,onValueChange:r=>l("weight_type",r),children:[e.jsx(k,{children:e.jsx(F,{placeholder:"Select weight type"})}),e.jsxs(C,{children:[e.jsx(x,{value:"kg",children:"Kilograms (kg)"}),e.jsx(x,{value:"pair",children:"Pairs"})]})]}),s.weight_type&&e.jsx("p",{className:"text-destructive text-sm",children:s.weight_type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Specify if this weight represents kilograms or pairs"})]})]}),e.jsx(E,{children:e.jsx(S,{type:"submit",disabled:f,children:"Update Weight"})})]})}export{K as default};
