import{K as v,r as l,j as e,L as O,a as E}from"./app-ByYlsqso.js";import{D as T}from"./delete-confirmation-dialog-0wtCJDDr.js";import{B as A}from"./badge-De5kYZpZ.js";import{B as P}from"./index-BCUn2pAr.js";import{D as x,e as B,a as h,b as u,c as f,d as g}from"./dialog-DW0IMjsb.js";import{A as I}from"./app-layout-CJRMCBna.js";import k from"./CreateRoleForm-CmOC7y8l.js";import L from"./EditRoleForm-BmyCKULC.js";import{D as M}from"./data-table-4qJ_Q_Xk.js";import{P as _}from"./plus-CqCBbOPE.js";import"./index-CMIcp8u6.js";import"./index-DXBWSKnI.js";import"./input-B5apdutg.js";import"./label-D4kYqDni.js";import"./progress-C5CCvUab.js";import"./app-logo-icon-CyJij1Tq.js";import"./select-B8sg3PlV.js";import"./floating-ui.dom-C5vApqfE.js";import"./check-DTWqeJbN.js";import"./index-DJdMjmy0.js";import"./chevrons-up-down-Bs9qXztR.js";import"./chevron-right-DbNAn7bC.js";import"./CreateGradedBagPoolForm-C2j5RNjU.js";import"./async-select-CRfvG8yt.js";import"./printGradedBarcodes-NhWhYMVq.js";import"./printer-DjVQZ1x9.js";import"./checkbox-D4wiQtTE.js";import"./chevron-left-D0Kt2IEv.js";const F=[{title:"Roles Management",href:"/roles"}];function ue({roles:$,permissions:m}){const o=v().props.auth,i=(o==null?void 0:o.permissions)||[];console.log(i);const[j,d]=l.useState(!1),[D,t]=l.useState(!1),[b,n]=l.useState(!1),[p,w]=l.useState(null),[a,r]=l.useState(null),y=[{label:"Name",key:"name"},{label:"Display Name",key:"display_name"},{label:"Permissions",key:"permissions.name"}],N=[{id:"name",header:"Name",enableSorting:!0,cell:({row:s})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:s.original.name})})},{id:"display_name",header:"Display Name",enableSorting:!0,cell:({row:s})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:s.original.display_name})})},{id:"permissions",header:"Permissions",cell:({row:s})=>e.jsx("div",{className:" flex flex-wrap gap-1",children:s.original.permissions.map(c=>e.jsx(A,{variant:"outline",children:c.name},c.id))})}],C=async()=>{var s;a&&await E.delete(`/roles/${a.id}`),n(!1),r(null),(s=window.refreshDataTable)==null||s.call(window)},R=s=>{w(s),t(!0)},S=s=>{r(s),n(!0)};return e.jsxs(I,{breadcrumbs:F,children:[e.jsx(O,{title:"Roles Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[i.includes("roles-update")&&e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Roles Management"}),e.jsxs(x,{open:j,onOpenChange:d,children:[e.jsx(B,{asChild:!0,children:e.jsxs(P,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Add Role"]})}),e.jsxs(h,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(u,{children:[e.jsx(f,{children:"Create New Role"}),e.jsx(g,{children:"Add a new role and assign permissions."})]}),e.jsx(k,{permissions:m,onSuccess:()=>{var s;d(!1),(s=window.refreshDataTable)==null||s.call(window)}})]})]})]}),e.jsx(M,{filterableColumns:y,route:"/api/roles",columns:N,pageSize:10,...i.includes("roles-update")&&{onEdit:R},...i.includes("roles-update")&&{onDelete:S},params:{}})]}),e.jsx(x,{open:D,onOpenChange:t,children:e.jsxs(h,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsxs(u,{children:[e.jsx(f,{children:"Edit Role"}),e.jsx(g,{children:"Update role details and permissions."})]}),p&&e.jsx(L,{role:p,permissions:m,onSuccess:()=>{var s;t(!1),(s=window.refreshDataTable)==null||s.call(window)}})]})}),e.jsx(T,{isOpen:b,onClose:()=>{n(!1),r(null)},onConfirm:C,title:"Delete Role",description:`Are you sure you want to delete ${a==null?void 0:a.name}? This action cannot be undone. Any users with this role will lose it.`})]})}export{ue as default};
