import{r as S,m as v,j as e,a as b}from"./app-B81GrNVN.js";import{B as w,t as o}from"./index-BmlTZoYn.js";import{f as E}from"./dialog-_1aMC81m.js";import{I as N}from"./input-CgHuFDRy.js";import{L as h}from"./label-abHCevWa.js";import{S as C,a as k,b as F,c as _,d as g}from"./select-BUwKcd6J.js";import"./index-CWdVyxEp.js";import"./index-D9XNSD-3.js";import"./check-Cyb-QuqB.js";function O({onSuccess:a}){const[u,n]=S.useState(!1),{data:i,setData:l,errors:r,setError:x,reset:j,clearErrors:f}=v({name:"",weight_type:"kg"}),y=async t=>{var c,m;t.preventDefault(),f(),n(!0);try{const s=await b.post("/sections",i,{headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});o.success("Section created successfully!"),j(),a==null||a()}catch(s){if(console.error("Error creating section:",s),((m=s.response)==null?void 0:m.status)===422){const p=s.response.data.errors;Object.keys(p).forEach(d=>{x(d,p[d][0])}),o.error("Please check the form for errors.")}else o.error("Failed to create section. Please try again later.")}finally{n(!1)}};return e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"name",children:"Name"}),e.jsx(N,{id:"name",value:i.name,onChange:t=>l("name",t.target.value),required:!0,placeholder:"Enter section name"}),r.name&&e.jsx("p",{className:"text-destructive text-sm",children:r.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"weight_type",children:"Weight Type"}),e.jsxs(C,{value:i.weight_type,onValueChange:t=>l("weight_type",t),children:[e.jsx(k,{children:e.jsx(F,{placeholder:"Select weight type"})}),e.jsxs(_,{children:[e.jsx(g,{value:"kg",children:"Kilograms (kg)"}),e.jsx(g,{value:"pair",children:"Pairs"})]})]}),r.weight_type&&e.jsx("p",{className:"text-destructive text-sm",children:r.weight_type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select whether this section measures items in kilograms or pairs"})]})]}),e.jsx(E,{children:e.jsx(w,{type:"submit",disabled:u,children:"Create Section"})})]})}export{O as default};
