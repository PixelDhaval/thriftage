import{K as h,r as l,j as e,L as f}from"./app-CtuGzTD0.js";import{A as j,S as b,B as y}from"./app-layout-BGB8rSsi.js";import{B as n}from"./index-DTz_dOKf.js";import{D as N}from"./data-table-DkScS0uD.js";import{f as o}from"./format-CBpsKyOP.js";import"./dialog-se0ddr7h.js";import"./index-DIEkADUd.js";import"./input-BpOFhh0X.js";import"./label-BSxjy5Yj.js";import"./circle-alert-BI0BowhV.js";import"./app-logo-icon-cW5t1vWh.js";import"./floating-ui.react-dom-Hweb9cg9.js";import"./floating-ui.dom-C5vApqfE.js";import"./index-DKi30mk3.js";import"./chevrons-up-down-XS2XNHAR.js";import"./select-ICR_PJ75.js";import"./check-CV9dr0FE.js";const S=[{title:"Bags Opening",href:"/bags-opening"}];function $(){const i=h().props.auth,d=(i==null?void 0:i.permissions)||[],[v,B]=l.useState(null),[p,c]=l.useState(!1),[t,x]=l.useState({status:"unopened",sort_column:"updated_at",sort_direction:"desc"}),r=a=>{x(s=>({...s,status:a==="all"?"":a}))},g=[{label:"Barcode",key:"barcode"},{label:"Party",key:"party.name"},{label:"Weight",key:"weight.weight"},{label:"Container/Reference",key:"import.container_no"},{label:"Created At",key:"created_at"}],u=[{id:"barcode",header:"Barcode",enableSorting:!0,cell:({row:a})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-mono text-sm font-medium",children:a.original.barcode})})},{id:"party",header:"Party",enableSorting:!0,cell:({row:a})=>{var s;return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:((s=a.original.party)==null?void 0:s.name)||"-"})})}},{id:"weight",header:"Weight",enableSorting:!0,cell:({row:a})=>{var s;return e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:[((s=a.original.weight)==null?void 0:s.weight)||"-"," kg"]})})}},{id:"import_details",header:"Import Details",enableSorting:!1,cell:({row:a})=>{var s,m;return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:((s=a.original.import)==null?void 0:s.container_no)||"-"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:((m=a.original.import)==null?void 0:m.type)==="container"?"Container":"Local"})]})}},{id:"movement_date",header:"Movement Date",enableSorting:!0,cell:({row:a})=>{var s;return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:(s=a.original.import)!=null&&s.movement_date?o(a.original.import.movement_date,"dd/MM/yyyy"):"-"})})}},{id:"created_at",header:"Created At",enableSorting:!0,cell:({row:a})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:o(a.original.created_at,"dd/MM/yyyy HH:mm")})})},{id:"updated_at",header:"Updated At",enableSorting:!0,cell:({row:a})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:o(a.original.updated_at,"dd/MM/yyyy HH:mm")})})},...d.includes("bags-opening-update")?[{id:"status",header:"Status",enableSorting:!1,cell:({row:a})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${a.original.status==="opened"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.original.status})})}]:[]];return e.jsxs(j,{breadcrumbs:S,children:[e.jsx(f,{title:"Bags Opening"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Bags Opening"}),e.jsxs("p",{className:"text-muted-foreground",children:["Press ",e.jsx("kbd",{className:"bg-muted rounded px-1 py-0.5 text-xs",children:"Ctrl+I"})," to open barcode scanner."]})]}),d.includes("bags-opening-update")&&e.jsxs(n,{onClick:()=>c(!0),className:"gap-2",children:[e.jsx(b,{className:"h-4 w-4"}),"Open Scanner"]})]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx(n,{variant:t.status===""?"default":"outline",size:"sm",onClick:()=>r("all"),className:"h-9",children:"All Bags"}),e.jsx(n,{variant:t.status==="unopened"?"default":"outline",size:"sm",onClick:()=>r("unopened"),className:"h-9",children:"Unopened Bags"}),e.jsx(n,{variant:t.status==="opened"?"default":"outline",size:"sm",onClick:()=>r("opened"),className:"h-9",children:"Opened Bags"})]}),e.jsx(N,{filterableColumns:g,route:"/api/import-bags-with-barcodes",columns:u,pageSize:20,params:t},`status-${t.status}`),e.jsx(y,{isOpen:p,onClose:()=>c(!1)})]})]})}export{$ as default};
