import{r as n,m as E,j as e,a as N}from"./app-DxEDvTBz.js";import{B as b,t as c}from"./index-DWnafFNg.js";import{f as C}from"./dialog-C5Fs-K6Q.js";import{I as F}from"./input-CtyuglOk.js";import{L as l}from"./label-CuIrDb8X.js";import{T as I}from"./textarea-CsVnTqdN.js";import{A as _}from"./async-select-D53FkSPC.js";import"./index-Cv0lmLWN.js";import"./index-D7zJgkEx.js";import"./floating-ui.dom-C5vApqfE.js";function X({onSuccess:a}){const[h,m]=n.useState(!1),[A,D]=n.useState([]),{data:i,setData:o,errors:s,setError:f,reset:j,clearErrors:g}=E({name:"",section_id:"",description:""}),[v,S]=n.useState(null),y=async t=>{var d,p;t.preventDefault(),g(),m(!0);try{const r=await N.post("/items",i,{headers:{"X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});c.success("Item created successfully!"),j(),a==null||a()}catch(r){if(console.error("Error creating item:",r),((p=r.response)==null?void 0:p.status)===422){const u=r.response.data.errors;Object.keys(u).forEach(x=>{f(x,u[x][0])}),c.error("Please check the form for errors.")}else c.error("Failed to create item. Please try again later.")}finally{m(!1)}};return e.jsxs("form",{onSubmit:y,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"name",children:"Name"}),e.jsx(F,{id:"name",value:i.name,onChange:t=>o("name",t.target.value),required:!0,placeholder:"Enter item name"}),s.name&&e.jsx("p",{className:"text-destructive text-sm",children:s.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"section_id",children:"Section"}),e.jsx(_,{route:"/api/sections/select",value:v,onChange:t=>{o("section_id",t.id.toString()),S(t)}}),s.section_id&&e.jsx("p",{className:"text-destructive text-sm",children:s.section_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(I,{id:"description",value:i.description||"",onChange:t=>o("description",t.target.value),placeholder:"Enter description (optional)",rows:3}),s.description&&e.jsx("p",{className:"text-destructive text-sm",children:s.description})]})]}),e.jsx(C,{children:e.jsx(b,{type:"submit",disabled:h,children:"Create Item"})})]})}export{X as default};
