import{r as u,m as v,j as e,a as w}from"./app-B81GrNVN.js";import{B as b,t as l}from"./index-BmlTZoYn.js";import{f as E}from"./dialog-_1aMC81m.js";import{I as N}from"./input-CgHuFDRy.js";import{L as g}from"./label-abHCevWa.js";import{S as _,a as k,b as F,c as C,d as x}from"./select-BUwKcd6J.js";import"./index-CWdVyxEp.js";import"./index-D9XNSD-3.js";import"./check-Cyb-QuqB.js";function O({section:t,onSuccess:i}){const[f,c]=u.useState(!1),{data:o,setData:n,errors:s,setError:j,clearErrors:y}=v({name:t.name,weight_type:t.weight_type||"kg"});u.useEffect(()=>{n({name:t.name,weight_type:t.weight_type||"kg"})},[t]);const S=async r=>{var m,p;r.preventDefault(),y(),c(!0);try{const a=await w.put(`/sections/${t.id}`,o,{headers:{"X-CSRF-TOKEN":((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});l.success("Section updated successfully!"),i==null||i()}catch(a){if(console.error("Error updating section:",a),((p=a.response)==null?void 0:p.status)===422){const d=a.response.data.errors;Object.keys(d).forEach(h=>{j(h,d[h][0])}),l.error("Please check the form for errors.")}else l.error("Failed to update section. Please try again later.")}finally{c(!1)}};return e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(N,{id:"name",value:o.name,onChange:r=>n("name",r.target.value),required:!0}),s.name&&e.jsx("p",{className:"text-destructive text-sm",children:s.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"weight_type",children:"Weight Type"}),e.jsxs(_,{value:o.weight_type,onValueChange:r=>n("weight_type",r),children:[e.jsx(k,{children:e.jsx(F,{placeholder:"Select weight type"})}),e.jsxs(C,{children:[e.jsx(x,{value:"kg",children:"Kilograms (kg)"}),e.jsx(x,{value:"pair",children:"Pairs"})]})]}),s.weight_type&&e.jsx("p",{className:"text-destructive text-sm",children:s.weight_type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select whether this section measures items in kilograms or pairs"})]})]}),e.jsx(E,{children:e.jsx(b,{type:"submit",disabled:f,children:"Update Section"})})]})}export{O as default};
