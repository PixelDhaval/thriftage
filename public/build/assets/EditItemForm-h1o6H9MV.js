import{r as n,m as N,j as e,a as b}from"./app-R1SH3LGz.js";import{A as _}from"./async-select-0kXavgAc.js";import{B as F,t as l}from"./index-Drr2_Che.js";import{f as I}from"./dialog-BeDQxv5-.js";import{I as C}from"./input-zXVV2Gx4.js";import{L as m}from"./label-DyCNmtyF.js";import{T as A}from"./textarea-A0FiXIlZ.js";import"./floating-ui.dom-C5vApqfE.js";import"./index-CctiQqdO.js";import"./index-DXYRCy96.js";function X({item:s,onSuccess:c}){var x;const[j,p]=n.useState(!1),[D,T]=n.useState([]),{data:d,setData:a,errors:r,setError:S,clearErrors:v}=N({name:s.name,section_id:((x=s.section_id)==null?void 0:x.toString())||"",description:s.description||""}),[y,u]=n.useState(null);n.useEffect(()=>{var t,i;a({name:s.name,section_id:((t=s.section_id)==null?void 0:t.toString())||"",description:s.description||""}),u({id:s.section_id||"",name:((i=s.section)==null?void 0:i.name)||""})},[s]);const E=async t=>{var i,h;t.preventDefault(),v(),p(!0);try{const o=await b.put(`/items/${s.id}`,d,{headers:{"X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});l.success("Item updated successfully!"),c==null||c()}catch(o){if(console.error("Error updating item:",o),((h=o.response)==null?void 0:h.status)===422){const f=o.response.data.errors;Object.keys(f).forEach(g=>{S(g,f[g][0])}),l.error("Please check the form for errors.")}else l.error("Failed to update item. Please try again later.")}finally{p(!1)}};return e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"name",children:"Name"}),e.jsx(C,{id:"name",value:d.name,onChange:t=>a("name",t.target.value),required:!0}),r.name&&e.jsx("p",{className:"text-destructive text-sm",children:r.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"section_id",children:"Section"}),e.jsx(_,{route:"/api/sections/select",value:y,onChange:t=>{a("section_id",t.id.toString()),u(t)}}),r.section_id&&e.jsx("p",{className:"text-destructive text-sm",children:r.section_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(A,{id:"description",value:d.description||"",onChange:t=>a("description",t.target.value),rows:3}),r.description&&e.jsx("p",{className:"text-destructive text-sm",children:r.description})]})]}),e.jsx(I,{children:e.jsx(F,{type:"submit",disabled:j,children:"Update Item"})})]})}export{X as default};
