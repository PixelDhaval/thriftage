import{r as v,m as N,j as e,a as b}from"./app-B81GrNVN.js";import{B as E,t as o}from"./index-BmlTZoYn.js";import{f as _}from"./dialog-_1aMC81m.js";import{I as u}from"./input-CgHuFDRy.js";import{L as h}from"./label-abHCevWa.js";import"./index-CWdVyxEp.js";import"./index-D9XNSD-3.js";function k({onSuccess:t}){const[x,n]=v.useState(!1),{data:i,setData:m,errors:s,setError:f,reset:j,clearErrors:y}=N({name:"",display_name:""}),g=async r=>{var l,c;r.preventDefault(),y(),n(!0);try{const a=await b.post("/permissions",i,{headers:{"X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});o.success("Permission created successfully!"),j(),t==null||t()}catch(a){if(console.error("Error creating permission:",a),((c=a.response)==null?void 0:c.status)===422){const p=a.response.data.errors;Object.keys(p).forEach(d=>{f(d,p[d][0])}),o.error("Please check the form for errors.")}else o.error("Failed to create permission. Please try again later.")}finally{n(!1)}};return e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"name",children:"Name"}),e.jsx(u,{id:"name",value:i.name,onChange:r=>m("name",r.target.value),required:!0,placeholder:"permission-name"}),s.name&&e.jsx("p",{className:"text-destructive text-sm",children:s.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"display_name",children:"Display Name"}),e.jsx(u,{id:"display_name",value:i.display_name,onChange:r=>m("display_name",r.target.value),required:!0,placeholder:"Permission Name"}),s.display_name&&e.jsx("p",{className:"text-destructive text-sm",children:s.display_name})]})]}),e.jsx(_,{children:e.jsx(E,{type:"submit",disabled:x,children:"Create Permission"})})]})}export{k as default};
