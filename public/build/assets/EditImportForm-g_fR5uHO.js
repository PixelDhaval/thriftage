import{r as x,m as w,j as e,a as y}from"./app-wUZwPzD3.js";import{B as N,t as c}from"./index-1uObsv-p.js";import{f}from"./dialog-COlZQqyY.js";import{I as i}from"./input-Sj9AGIQ-.js";import{L as l}from"./label-Cn97VJAf.js";import"./index-CdGjkSEY.js";import"./index-CPPfu1Tl.js";function W({import:t,onSuccess:o}){const[p,g]=x.useState(!1),{data:a,setData:s,errors:n,setError:u,clearErrors:v}=w({party_id:t.party_id||"",container_no:t.container_no||"",movement_date:t.movement_date||"",bl_no:t.bl_no||"",bl_date:t.bl_date||"",be_no:t.be_no||"",be_date:t.be_date||"",bl_weight:t.bl_weight||"",weigh_bridge_weight:t.weigh_bridge_weight||"",type:t.type||"container"});x.useEffect(()=>{s({party_id:t.party_id||"",container_no:t.container_no||"",movement_date:t.movement_date||"",bl_no:t.bl_no||"",bl_date:t.bl_date||"",be_no:t.be_no||"",be_date:t.be_date||"",bl_weight:t.bl_weight||"",weigh_bridge_weight:t.weigh_bridge_weight||"",type:t.type||"container"})},[t]);const j=async r=>{var h,_;r.preventDefault(),v(),g(!0);try{const d=await y.put(`/imports/${t.id}`,a,{headers:{"X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});c.success("Import updated successfully!"),o==null||o()}catch(d){if(console.error("Error updating import:",d),((_=d.response)==null?void 0:_.status)===422){const b=d.response.data.errors;Object.keys(b).forEach(m=>{u(m,b[m][0])}),c.error("Please check the form for errors.")}else c.error("Failed to update import. Please try again later.")}finally{g(!1)}};return e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"container_no",children:a.type==="container"?"Container Number":"Reference Number"}),e.jsx(i,{id:"container_no",value:a.container_no,onChange:r=>s("container_no",r.target.value),placeholder:a.type==="container"?"Enter container number":"Enter reference number"}),n.container_no&&e.jsx("p",{className:"text-destructive text-sm",children:n.container_no})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"movement_date",children:a.type==="container"?"Movement Date":"Delivery Date"}),e.jsx(i,{id:"movement_date",type:"date",value:a.movement_date,onChange:r=>s("movement_date",r.target.value)}),n.movement_date&&e.jsx("p",{className:"text-destructive text-sm",children:n.movement_date})]}),a.type==="container"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"bl_no",children:"BL Number"}),e.jsx(i,{id:"bl_no",value:a.bl_no,onChange:r=>s("bl_no",r.target.value),placeholder:"Enter BL number"}),n.bl_no&&e.jsx("p",{className:"text-destructive text-sm",children:n.bl_no})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"bl_date",children:"BL Date"}),e.jsx(i,{id:"bl_date",type:"date",value:a.bl_date,onChange:r=>s("bl_date",r.target.value)}),n.bl_date&&e.jsx("p",{className:"text-destructive text-sm",children:n.bl_date})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"be_no",children:"BE Number"}),e.jsx(i,{id:"be_no",value:a.be_no,onChange:r=>s("be_no",r.target.value),placeholder:"Enter BE number"}),n.be_no&&e.jsx("p",{className:"text-destructive text-sm",children:n.be_no})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"be_date",children:"BE Date"}),e.jsx(i,{id:"be_date",type:"date",value:a.be_date,onChange:r=>s("be_date",r.target.value)}),n.be_date&&e.jsx("p",{className:"text-destructive text-sm",children:n.be_date})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"bl_weight",children:"BL Weight (kg)"}),e.jsx(i,{id:"bl_weight",type:"number",step:"0.01",value:a.bl_weight,onChange:r=>s("bl_weight",r.target.value),placeholder:"Enter BL weight"}),n.bl_weight&&e.jsx("p",{className:"text-destructive text-sm",children:n.bl_weight})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"weigh_bridge_weight",children:a.type==="container"?"Weigh Bridge Weight (kg)":"Total Weight (kg)"}),e.jsx(i,{id:"weigh_bridge_weight",type:"number",step:"0.01",value:a.weigh_bridge_weight,onChange:r=>s("weigh_bridge_weight",r.target.value),placeholder:a.type==="container"?"Enter weigh bridge weight":"Enter total weight"}),n.weigh_bridge_weight&&e.jsx("p",{className:"text-destructive text-sm",children:n.weigh_bridge_weight})]})]}),e.jsx(f,{children:e.jsx(N,{type:"submit",disabled:p,children:"Update Import"})})]})}export{W as default};
