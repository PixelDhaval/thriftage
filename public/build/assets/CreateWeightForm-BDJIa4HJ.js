import{r as y,m as v,j as e,a as b}from"./app-C6wr7xOM.js";import{B as S,t as o}from"./index-ByhlrBJ7.js";import{f as E}from"./dialog-Dune_8vQ.js";import{I as N}from"./input-3tYqWR7g.js";import{L as m}from"./label-C16cjRI5.js";import{S as C,a as k,b as F,c as _,d}from"./select-Kz6bl7S3.js";import"./index-CdYzvuDs.js";import"./index-CrXPg-Qx.js";import"./check-Dpvvyly-.js";function K({onSuccess:a}){const[u,l]=y.useState(!1),{data:i,setData:c,errors:r,setError:x,reset:f,clearErrors:j}=v({weight:"",weight_type:"kg"}),w=async t=>{var n,h;t.preventDefault(),j(),l(!0);try{const s=await b.post("/weights",i,{headers:{"X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});o.success("Weight created successfully!"),f(),a==null||a()}catch(s){if(console.error("Error creating weight:",s),((h=s.response)==null?void 0:h.status)===422){const p=s.response.data.errors;Object.keys(p).forEach(g=>{x(g,p[g][0])}),o.error("Please check the form for errors.")}else o.error("Failed to create weight. Please try again later.")}finally{l(!1)}};return e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"weight",children:"Weight Value"}),e.jsx(N,{id:"weight",value:i.weight,onChange:t=>c("weight",t.target.value),required:!0,placeholder:"Enter weight value",type:"number",step:"0.01"}),r.weight&&e.jsx("p",{className:"text-destructive text-sm",children:r.weight})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"weight_type",children:"Weight Type"}),e.jsxs(C,{value:i.weight_type,onValueChange:t=>c("weight_type",t),children:[e.jsx(k,{children:e.jsx(F,{placeholder:"Select weight type"})}),e.jsxs(_,{children:[e.jsx(d,{value:"kg",children:"Kilograms (kg)"}),e.jsx(d,{value:"pair",children:"Pairs"})]})]}),r.weight_type&&e.jsx("p",{className:"text-destructive text-sm",children:r.weight_type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Specify if this weight represents kilograms or pairs"})]})]}),e.jsx(E,{children:e.jsx(S,{type:"submit",disabled:u,children:"Create Weight"})})]})}export{K as default};
