import{K as Ee,r as s,j as e,L as ve,a as x}from"./app-B81GrNVN.js";import{D as j}from"./delete-confirmation-dialog-B47qwWZc.js";import{B as f,t as l}from"./index-BmlTZoYn.js";import{D as S}from"./data-table-g425Msrv.js";import{D as r,e as w,a as o,b as c,c as d,d as m}from"./dialog-_1aMC81m.js";import{T as We,a as Ae,b as D,c as b}from"./tabs-D61MmZJE.js";import{A as Ge}from"./app-layout-DxSffBsZ.js";import ke from"./CreateGradeForm-B8tCf4rB.js";import _e from"./CreateItemForm-oUE8V18Q.js";import Fe from"./CreateSectionForm-BCjj0cqH.js";import $e from"./CreateWeightForm-BmMZXEkK.js";import Le from"./EditGradeForm-Gt1JXRiP.js";import Me from"./EditItemForm-B6ler89F.js";import Pe from"./EditSectionForm-Cy3xVKfw.js";import ze from"./EditWeightForm-6FHm8gn5.js";import{P as C}from"./plus-CC6at3HC.js";import"./input-CgHuFDRy.js";import"./select-BUwKcd6J.js";import"./index-D9XNSD-3.js";import"./check-Cyb-QuqB.js";import"./chevrons-up-down-CG-NcDHP.js";import"./chevron-left-BmLwpZCy.js";import"./chevron-right-YmbVTZn4.js";import"./index-CWdVyxEp.js";import"./label-abHCevWa.js";import"./progress-Cv1I-sH5.js";import"./app-logo-icon-DYYlSjg_.js";import"./index-Carsqqyp.js";import"./CreateGradedBagPoolForm-Ctbh8bFL.js";import"./async-select-DsxhFxiQ.js";import"./printGradedBarcodes-C9_5HlU_.js";import"./printer-CUg1IuD4.js";import"./textarea-Dj_aEoOM.js";const Ke=[{title:"Items Management",href:"/items"}];function Ct({items:Re}){const y=Ee().props.auth,i=(y==null?void 0:y.permissions)||[],[B,$]=s.useState(!1),[U,N]=s.useState(!1),[X,O]=s.useState(!1),[L,H]=s.useState(null),[h,I]=s.useState(null),[V,M]=s.useState(!1),[J,T]=s.useState(!1),[Q,E]=s.useState(!1),[P,Y]=s.useState(null),[g,v]=s.useState(null),[Z,z]=s.useState(!1),[ee,W]=s.useState(!1),[te,A]=s.useState(!1),[K,se]=s.useState(null),[u,G]=s.useState(null),[ae,R]=s.useState(!1),[ie,k]=s.useState(!1),[ne,_]=s.useState(!1),[q,le]=s.useState(null),[p,F]=s.useState(null),[re,oe]=s.useState("items"),ce=t=>{I(t),O(!0)},de=async()=>{var t,a;if(h)try{await x.delete(`/items/${h.id}`,{headers:{"X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||"",Accept:"application/json"}}),l.success(`Item ${h.name} deleted successfully.`),(a=window.refreshDataTable)==null||a.call(window)}catch(n){console.error("Error deleting item:",n),l.error("Failed to delete item. Please try again later.")}O(!1),I(null)},me=t=>{H(t),N(!0)},he=t=>{v(t),E(!0)},ge=async()=>{var t,a;if(g)try{await x.delete(`/sections/${g.id}`,{headers:{"X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||"",Accept:"application/json"}}),l.success(`Section ${g.name} deleted successfully.`),(a=window.refreshDataTable)==null||a.call(window)}catch(n){console.error("Error deleting section:",n),l.error("Failed to delete section. Please try again later.")}E(!1),v(null)},ue=t=>{Y(t),T(!0)},pe=t=>{G(t),A(!0)},xe=async()=>{var t,a;if(u)try{await x.delete(`/grades/${u.id}`,{headers:{"X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||"",Accept:"application/json"}}),l.success(`Grade ${u.name} deleted successfully.`),(a=window.refreshDataTable)==null||a.call(window)}catch(n){console.error("Error deleting grade:",n),l.error("Failed to delete grade. Please try again later.")}A(!1),G(null)},je=t=>{se(t),W(!0)},fe=t=>{F(t),_(!0)},Se=async()=>{var t,a;if(p)try{await x.delete(`/weights/${p.id}`,{headers:{"X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||"",Accept:"application/json"}}),l.success(`Weight ${p.weight} deleted successfully.`),(a=window.refreshDataTable)==null||a.call(window)}catch(n){console.error("Error deleting weight:",n),l.error("Failed to delete weight. Please try again later.")}_(!1),F(null)},we=t=>{le(t),k(!0)},De=[{label:"Name",key:"name"},{label:"Section",key:"section.name"},{label:"Grade",key:"grade.name"},{label:"Description",key:"description"}],be=[{id:"name",header:"Name",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:t.original.name})})},{id:"section",header:"Section",enableSorting:!0,cell:({row:t})=>{var a,n;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:((a=t.original.section)==null?void 0:a.name)||"-"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",((n=t.original.section)==null?void 0:n.weight_type)||"kg",")"]})]})}},{id:"grade",header:"Grade",enableSorting:!0,cell:({row:t})=>{var a;return e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:((a=t.original.grade)==null?void 0:a.name)||"-"})})}},{id:"default_weight",header:"Default Weight",enableSorting:!1,cell:({row:t})=>{var a;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:((a=t.original.default_weight)==null?void 0:a.weight)||"-"}),t.original.default_weight&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",t.original.default_weight.weight_type,")"]})]})}},{id:"description",header:"Description",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:t.original.description||"-"})})},{id:"created_at",header:"Created At",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:new Date(t.original.created_at).toLocaleDateString()})})}],Ce=[{label:"Name",key:"name"},{label:"Weight Type",key:"weight_type"}],ye=[{id:"name",header:"Name",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:t.original.name})})},{id:"weight_type",header:"Weight Type",enableSorting:!0,cell:({row:t})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"capitalize",children:t.original.weight_type||"kg"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.original.weight_type==="pair"?"Counts in pairs":"Measures in kg"})]})},{id:"created_at",header:"Created At",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:new Date(t.original.created_at).toLocaleDateString()})})}],Ne=[{label:"Name",key:"name"}],Oe=[{id:"name",header:"Name",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:t.original.name})})},{id:"created_at",header:"Created At",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:new Date(t.original.created_at).toLocaleDateString()})})}],Ie=[{label:"Weight",key:"weight"},{label:"Weight Type",key:"weight_type"}],Te=[{id:"weight",header:"Weight",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:t.original.weight})})},{id:"weight_type",header:"Weight Type",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"capitalize",children:t.original.weight_type||"kg"})})},{id:"created_at",header:"Created At",enableSorting:!0,cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:new Date(t.original.created_at).toLocaleDateString()})})}];return e.jsxs(Ge,{breadcrumbs:Ke,children:[e.jsx(ve,{title:"Items Management"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:e.jsxs(We,{value:re,onValueChange:oe,className:"w-full",children:[e.jsxs(Ae,{className:"grid grid-flow-col",children:[i.includes("items-read")&&e.jsx(D,{value:"items",children:"Items"}),i.includes("sections-read")&&e.jsx(D,{value:"sections",children:"Sections"}),i.includes("grades-read")&&e.jsx(D,{value:"grades",children:"Grades"}),i.includes("weights-read")&&e.jsx(D,{value:"weights",children:"Bag Weights"})]}),e.jsxs(b,{value:"items",children:[e.jsxs("div",{className:"mb-4 py-4 flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Items Management"}),i.includes("items-update")&&e.jsxs(r,{open:B,onOpenChange:$,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Add Item"]})}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Create New Item"}),e.jsx(m,{children:"Add a new item to the system."})]}),e.jsx(_e,{onSuccess:()=>{var t;$(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})]})]}),e.jsx(S,{filterableColumns:De,route:"/api/items",columns:be,pageSize:20,...i.includes("items-update")&&{onEdit:me},...i.includes("items-update")&&{onDelete:ce},params:{}}),e.jsx(r,{open:U,onOpenChange:N,children:e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Edit Item"}),e.jsx(m,{children:"Update item details."})]}),L&&e.jsx(Me,{item:L,onSuccess:()=>{var t;N(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})}),e.jsx(j,{isOpen:X,onClose:()=>{O(!1),I(null)},onConfirm:de,title:"Delete Item",description:`Are you sure you want to delete ${h==null?void 0:h.name}? This action cannot be undone.`})]}),e.jsxs(b,{value:"sections",children:[e.jsxs("div",{className:"mb-4 py-4 flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Section Management"}),i.includes("sections-update")&&e.jsxs(r,{open:V,onOpenChange:M,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Add Section"]})}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Create New Section"}),e.jsx(m,{children:"Add a new section to the system."})]}),e.jsx(Fe,{onSuccess:()=>{var t;M(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})]})]}),e.jsx(S,{filterableColumns:Ce,route:"/api/sections",columns:ye,pageSize:20,...i.includes("sections-update")&&{onEdit:ue},...i.includes("sections-update")&&{onDelete:he},params:{}}),e.jsx(r,{open:J,onOpenChange:T,children:e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Edit Section"}),e.jsx(m,{children:"Update section details."})]}),P&&e.jsx(Pe,{section:P,onSuccess:()=>{var t;T(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})}),e.jsx(j,{isOpen:Q,onClose:()=>{E(!1),v(null)},onConfirm:ge,title:"Delete Section",description:`Are you sure you want to delete ${g==null?void 0:g.name}? This action cannot be undone.`})]}),e.jsxs(b,{value:"grades",children:[e.jsxs("div",{className:"mb-4 py-4 flex justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Grade Management"}),i.includes("grades-update")&&e.jsxs(r,{open:Z,onOpenChange:z,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Add Grade"]})}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Create New Grade"}),e.jsx(m,{children:"Add a new grade to the system."})]}),e.jsx(ke,{onSuccess:()=>{var t;z(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})]})]}),e.jsx(S,{filterableColumns:Ne,route:"/api/grades",columns:Oe,pageSize:20,...i.includes("grades-update")&&{onEdit:je},...i.includes("grades-update")&&{onDelete:pe},params:{}}),e.jsx(r,{open:ee,onOpenChange:W,children:e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Edit Grade"}),e.jsx(m,{children:"Update grade details."})]}),K&&e.jsx(Le,{grade:K,onSuccess:()=>{var t;W(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})}),e.jsx(j,{isOpen:te,onClose:()=>{A(!1),G(null)},onConfirm:xe,title:"Delete Grade",description:`Are you sure you want to delete ${u==null?void 0:u.name}? This action cannot be undone.`})]}),e.jsxs(b,{value:"weights",children:[e.jsxs("div",{className:"mb-4 py-4 flex justify-between",children:[e.jsx("h1",{className:"text-2xl  font-semibold",children:"Bag Weight Management"}),i.includes("weights-update")&&e.jsxs(r,{open:ae,onOpenChange:R,children:[e.jsx(w,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Add Weight"]})}),e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Create New Weight"}),e.jsx(m,{children:"Add a new weight to the system."})]}),e.jsx($e,{onSuccess:()=>{var t;R(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})]})]}),e.jsx(S,{filterableColumns:Ie,route:"/api/weights",columns:Te,pageSize:20,...i.includes("weights-update")&&{onEdit:we},...i.includes("weights-update")&&{onDelete:fe},params:{}}),e.jsx(r,{open:ie,onOpenChange:k,children:e.jsxs(o,{children:[e.jsxs(c,{children:[e.jsx(d,{children:"Edit Weight"}),e.jsx(m,{children:"Update weight details."})]}),q&&e.jsx(ze,{weight:q,onSuccess:()=>{var t;k(!1),(t=window.refreshDataTable)==null||t.call(window)}})]})}),e.jsx(j,{isOpen:ne,onClose:()=>{_(!1),F(null)},onConfirm:Se,title:"Delete Weight",description:`Are you sure you want to delete weight ${p==null?void 0:p.weight}? This action cannot be undone.`})]})]})})]})}export{Ct as default};
