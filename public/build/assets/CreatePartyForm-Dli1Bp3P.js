import{r as _,m as f,j as e,a as E}from"./app-CBgNfxV6.js";import{B as C,t as o}from"./index-CxkpNBdp.js";import{f as F}from"./dialog-BcVaU9Qh.js";import{I as i}from"./input-3IsToTN2.js";import{L as l}from"./label-DNWKkJcz.js";import{S,a as b,b as P,c as z,d as n}from"./select-C2ax7mEg.js";import"./index-CBcOgFbC.js";import"./index-uXSY9LXb.js";import"./floating-ui.dom-C5vApqfE.js";import"./check-Dj-469CK.js";function R({onSuccess:c}){const[g,m]=_.useState(!1),{data:r,setData:a,errors:t,setError:j,reset:v,clearErrors:y}=f({name:"",type:"",address_line_1:"",address_line_2:"",city:"",state:"",zip:"",country:"",phone:"",email:"",gst:""}),N=async s=>{var p,h;s.preventDefault(),y(),m(!0);try{const d=await E.post("/parties",r,{headers:{"X-CSRF-TOKEN":((p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"))||"","Content-Type":"application/json",Accept:"application/json"}});o.success("Party created successfully!"),v(),c==null||c()}catch(d){if(console.error("Error creating party:",d),((h=d.response)==null?void 0:h.status)===422){const x=d.response.data.errors;Object.keys(x).forEach(u=>{j(u,x[u][0])}),o.error("Please check the form for errors.")}else o.error("Failed to create party. Please try again later.")}finally{m(!1)}};return e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"name",children:"Name"}),e.jsx(i,{id:"name",value:r.name,onChange:s=>a("name",s.target.value),required:!0,placeholder:"Enter party name"}),t.name&&e.jsx("p",{className:"text-destructive text-sm",children:t.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"type",children:"Type"}),e.jsxs(S,{value:r.type,onValueChange:s=>a("type",s),children:[e.jsx(b,{children:e.jsx(P,{placeholder:"Select type"})}),e.jsxs(z,{children:[e.jsx(n,{value:"importer",children:"Importer"}),e.jsx(n,{value:"supplier",children:"Supplier"}),e.jsx(n,{value:"exporter",children:"Exporter"}),e.jsx(n,{value:"local",children:"Local"})]})]}),t.type&&e.jsx("p",{className:"text-destructive text-sm",children:t.type})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"address_line_1",children:"Address Line 1"}),e.jsx(i,{id:"address_line_1",value:r.address_line_1,onChange:s=>a("address_line_1",s.target.value),placeholder:"Enter address line 1"}),t.address_line_1&&e.jsx("p",{className:"text-destructive text-sm",children:t.address_line_1})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"address_line_2",children:"Address Line 2"}),e.jsx(i,{id:"address_line_2",value:r.address_line_2,onChange:s=>a("address_line_2",s.target.value),placeholder:"Enter address line 2"}),t.address_line_2&&e.jsx("p",{className:"text-destructive text-sm",children:t.address_line_2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"city",children:"City"}),e.jsx(i,{id:"city",value:r.city,onChange:s=>a("city",s.target.value),placeholder:"Enter city"}),t.city&&e.jsx("p",{className:"text-destructive text-sm",children:t.city})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"state",children:"State"}),e.jsx(i,{id:"state",value:r.state,onChange:s=>a("state",s.target.value),placeholder:"Enter state"}),t.state&&e.jsx("p",{className:"text-destructive text-sm",children:t.state})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"zip",children:"ZIP Code"}),e.jsx(i,{id:"zip",value:r.zip,onChange:s=>a("zip",s.target.value),placeholder:"Enter ZIP code"}),t.zip&&e.jsx("p",{className:"text-destructive text-sm",children:t.zip})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"country",children:"Country"}),e.jsx(i,{id:"country",value:r.country,onChange:s=>a("country",s.target.value),placeholder:"Enter country"}),t.country&&e.jsx("p",{className:"text-destructive text-sm",children:t.country})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone"}),e.jsx(i,{id:"phone",value:r.phone,onChange:s=>a("phone",s.target.value),placeholder:"Enter phone number"}),t.phone&&e.jsx("p",{className:"text-destructive text-sm",children:t.phone})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",value:r.email,onChange:s=>a("email",s.target.value),placeholder:"Enter email address"}),t.email&&e.jsx("p",{className:"text-destructive text-sm",children:t.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"gst",children:"GST Number"}),e.jsx(i,{id:"gst",value:r.gst,onChange:s=>a("gst",s.target.value),placeholder:"Enter GST number"}),t.gst&&e.jsx("p",{className:"text-destructive text-sm",children:t.gst})]})]}),e.jsx(F,{children:e.jsx(C,{type:"submit",disabled:g,children:"Create Party"})})]})}export{R as default};
